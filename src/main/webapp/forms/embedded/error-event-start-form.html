<!--
 Camunda Workshop

 @author wflat
-->

<!-- formKey: embedded:app:forms/embedded/error-event-start-form.html -->
<form role="form" class="form-horizontal">
  <div class="form-group">
    <label class="control-label col-md-4" for="business-key-field">Business key</label>
    <div class="col-md-8">
      <input readonly id="business-key-field" ng-model="businessKey" cam-variable-type="String" class="form-control"/>
    </div>
  </div>
  <div class="form-group">
    <label class="control-label col-md-4" for="error-field">Error in subprocess?</label>
    <div class="col-md-8">
      <input type="checkbox" value="false" id="error-field" cam-variable-name="subprocess_error" cam-variable-type="Boolean" class="form-control"/>
    </div>
  </div>

  <script cam-script type="text/form-script">
    // debugger;
    var variableManager = camForm.variableManager;

    camForm.on('form-loaded', function() {
      // Generated BusinessKey
      $scope.businessKey = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = Math.random()*16|0,v=c=='x'?r:r&0x3|0x8;return v.toString(16);
      });
    });

    camForm.on('submit', function() {
      // Set the BusinessKey
      camForm.businessKey = $scope.businessKey;
    });
  </script>
</form>
